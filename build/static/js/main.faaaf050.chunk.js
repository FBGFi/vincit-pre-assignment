(this["webpackJsonpvincit-pre-assignment"]=this["webpackJsonpvincit-pre-assignment"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(7),i=n.n(r),s=(n(15),n(8)),l=n(2),o=(n(16),n(17),n(0)),u=c.a.forwardRef((function(e,t){return Object(o.jsxs)("form",{ref:t,className:e.className||"Form",onSubmit:function(t){t.preventDefault(),e.onSubmit(t)},children:[e.children,Object(o.jsx)("button",{type:"submit",children:"Submit"})]})})),d=(n(19),function(e){return Object(o.jsx)("main",{className:e.className||"Page",children:e.children})}),h=(n(20),function(e){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("label",{htmlFor:e.id,children:e.title}),e.children]})}),j=function(e){return Object(o.jsx)(h,{title:e.title,id:e.id,children:Object(o.jsx)("input",{required:e.required,type:"date",name:e.name,id:e.id,min:e.min,max:e.max,onChange:e.onChange})})},b=n(3),f=n(4),m=n(10),v=n(9),O=function(){function e(t){Object(b.a)(this,e),this.apiUrl=void 0,this.apiUrl=t}return Object(f.a)(e,[{key:"parseQueryParameters",value:function(e){if(!e)return null;var t=[];for(var n in e)t.push("".concat(n,"=").concat(e[n]));return"?".concat(t.join("&"))}},{key:"fetch",value:function(e){function t(t,n,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){fetch("".concat(this.apiUrl).concat(e).concat(this.parseQueryParameters(n))).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return console.error(e)}))}))}]),e}(),g=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"getSupportedCoins",value:function(e){this.fetch("/coins/list",e)}},{key:"getMarketChartRange",value:function(e,t,n){this.fetch("/coins/".concat(e,"/market_chart/range"),t,n)}}]),n}(O),p="https://api.coingecko.com/api/v3",x=function(e){return new Date(e).getTime()/1e3},w=function(e){return"".concat(e.getUTCDate(),".").concat(e.getUTCMonth()+1,".").concat(e.getUTCFullYear())},y=function(e,t){for(var n=e.toString(),a=n.length;a<t;a++)n="0"+n;return n},N=(n(21),function(e){return Object(o.jsx)("div",{className:"Modal",children:Object(o.jsxs)("div",{className:"container",children:[e.children,Object(o.jsx)("button",{onClick:function(){return e.close(!0)},children:"Close"})]})})}),C=(n(22),function(e){var t=Object(a.useRef)(null);function n(e,t){return{min:Math.min.apply(null,e.map((function(e){return e[t]}))),max:Math.max.apply(null,e.map((function(e){return e[t]})))}}var c=function(e,t,a){var c,r,i=a[0][0],s=(a[a.length-1][0]-i)/e.width,l=n(a,1),o=l.min,u=(l.max-o)/(e.height-50),d=e.getContext("2d");if(d){d.strokeStyle=t,d.lineWidth=.4;for(var h=1;h<a.length;h++)c=[(a[h-1][0]-i)/s/5,(e.height-((a[h-1][1]-o)/u+25))/5],r=[(a[h][0]-i)/s/5,(e.height-((a[h][1]-o)/u+25))/5],d.beginPath(),d.moveTo(c[0],c[1]),d.lineTo(r[0],r[1]),d.stroke()}};return Object(a.useEffect)((function(){t.current&&(!function(e){var t=e.getContext("2d");t&&(e.width=5*e.width,e.height=5*e.height,t.scale(5,5))}(t.current),c(t.current,"hsl(30, 100%, 47%)",e.data.total_volumes),c(t.current,"red",e.data.prices)),e.finishedDrawing()}),[]),Object(o.jsxs)("div",{className:"DataChart",children:[Object(o.jsxs)("div",{className:"volumes-range",children:[Object(o.jsxs)("span",{className:"volumes-label high",children:[(n(e.data.total_volumes,1).max/1e9).toFixed(2),"B \u20ac"]}),Object(o.jsxs)("span",{className:"volumes-label low",children:[(n(e.data.total_volumes,1).min/1e9).toFixed(2),"B \u20ac"]})]}),Object(o.jsxs)("div",{className:"chart-container",children:[Object(o.jsx)("span",{className:"volumes-label first",children:w(new Date(e.data.total_volumes[0][0]))}),Object(o.jsx)("span",{className:"volumes-label",children:"Trading Volumes"}),Object(o.jsx)("span",{className:"volumes-label last",children:w(new Date(e.data.total_volumes[e.data.total_volumes.length-1][0]))}),Object(o.jsx)("canvas",{ref:t}),Object(o.jsx)("span",{className:"prices-label first",children:w(new Date(e.data.prices[0][0]))}),Object(o.jsx)("span",{className:"prices-label",children:"Price"}),Object(o.jsx)("span",{className:"prices-label last",children:w(new Date(e.data.prices[e.data.total_volumes.length-1][0]))})]}),Object(o.jsxs)("div",{className:"price-range",children:[Object(o.jsxs)("span",{className:"prices-label high",children:[(n(e.data.prices,1).max/1e3).toFixed(2),"K \u20ac"]}),Object(o.jsxs)("span",{className:"prices-label low",children:[(n(e.data.prices,1).min/1e3).toFixed(2),"K \u20ac"]})]})]})}),k=(n(23),function(){return Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"LoadingIndicator",width:"50",height:"50",fill:"none",viewBox:"0 0 50 50",children:Object(o.jsx)("circle",{cx:"25",cy:"25",r:"21",stroke:"hsl(30, 100%, 47%)",strokeWidth:"8",strokeDasharray:"20 24"})})}),S=function(){var e,t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!0),h=Object(l.a)(i,2),b=h[0],f=h[1],m=Object(a.useState)(null),v=Object(l.a)(m,2),O=v[0],S=v[1],D=Object(a.useState)(null),_=Object(l.a)(D,2),F=_[0],T=_[1],M=Object(a.useState)(null),U=Object(l.a)(M,2),B=U[0],R=U[1],P=Object(a.useState)(null),q=Object(l.a)(P,2),E=q[0],A=q[1],I=Object(a.useState)((e=new Date(Date.now()),y(e.getUTCFullYear(),2)+"-"+y(e.getUTCMonth()+1,2)+"-"+y(e.getUTCDate(),2))),H=Object(l.a)(I,2),J=H[0],K=H[1],L=Object(a.useState)(void 0),Q=Object(l.a)(L,2),W=Q[0],Y=Q[1],V=Object(a.createRef)(),z=new g(p),G=function(e){var t,n={},a=Object(s.a)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value;n[w(new Date(c[0]))]=c[1]}}catch(r){a.e(r)}finally{a.f()}return n},X=function(e){var t=G(e),n=0,a=0,c="",r="";for(var i in t)t[r]&&t[r]>t[i]&&a++,n<a&&(n=a,c=i),t[r]<t[i]&&(a=0),r=i;var s=Object.keys(t),l=s[s.findIndex((function(e){return e===c}))-n+1];return 0===n?null:{start:l,end:c,length:n}},Z=function(e){if(0===e.prices.length)return window.alert("No results for given date range!"),void r(!1);T(function(e){var t=G(e),n=0,a="";for(var c in t)n<t[c]&&(n=t[c],a=c);return""===a?null:{date:a,volume:n}}(e.total_volumes)),R(X(e.prices)),A(function(e){var t=X(e),n=G(e);if(!t||t.length===Object.keys(n).length)return null;var a="",c="";for(var r in n)(!n[a]||n[a]>n[r])&&(a=r),(!n[c]||n[c]<n[r])&&(c=r);return{buy:{date:a,price:n[a]},sell:{date:c,price:n[c]}}}(e.prices)),S(Object(o.jsx)(C,{finishedDrawing:function(){r(!1)},data:e})),f(!1)},$=function(e){Y(e.target.value),K(e.target.value)};return Object(o.jsxs)(d,{className:c?"Home loading-modal":"Home",children:[b?null:Object(o.jsxs)(N,{close:f,children:[Object(o.jsx)("h2",{children:"BitCoin market values"}),Object(o.jsx)("span",{children:B?"Longest downward trend was ".concat(null===B||void 0===B?void 0:B.length,", from ").concat(null===B||void 0===B?void 0:B.start," to ").concat(null===B||void 0===B?void 0:B.end):"No downward trend"}),Object(o.jsxs)("span",{children:[null===F||void 0===F?void 0:F.date," had the highest trading volume, total of ",null===F||void 0===F?void 0:F.volume.toFixed(2),"\u20ac"]}),Object(o.jsx)("span",{children:E?"Best day to buy BitCoins was ".concat(null===E||void 0===E?void 0:E.buy.date," for ").concat(null===E||void 0===E?void 0:E.buy.price.toFixed(2),"\u20ac, and the best day to sell was ").concat(null===E||void 0===E?void 0:E.sell.date," for ").concat(null===E||void 0===E?void 0:E.sell.price.toFixed(2),"\u20ac"):"No profit for given date range"}),O]}),c?Object(o.jsx)(k,{}):null,Object(o.jsxs)(u,{className:"BitCoinRangeForm",onSubmit:function(e){r(!0);var t=Object.fromEntries(new FormData(e.target)),n=t.start_date,a=t.end_date,c={vs_currency:"eur",from:x(n),to:x(a)+86399};z.getMarketChartRange("bitcoin",Z,c)},ref:V,children:[Object(o.jsx)(j,{formRef:V,required:!0,id:"start_date",name:"start_date",title:"Start date",max:J,onChange:$}),Object(o.jsx)(j,{formRef:V,required:!0,id:"end_date",name:"end_date",title:"End date",min:W,onChange:$})]})]})},D=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(S,{}),Object(o.jsx)("h1",{children:"Made by: Aleksi Alhola"})]})};n(24);i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(D,{})}),document.getElementById("root"))}],[[25,1,2]]]);
//# sourceMappingURL=main.faaaf050.chunk.js.map